<!DOCTYPE html>
<html lang="en">
  <head>
    {% block head %}
    <title>My Spotify Haiku</title>
    {% endblock %}
  </head>
  <body>
    <div id="content">
      <button id="btn">Write my haiku</button>
    </div>
    <div id="footer">
      {% block footer %} Made with ❤️ by
      <a href="https://aleguy02.dev">Alejandro Villate</a>. {% endblock %}
    </div>

    <script>
      const btn = document.getElementById('btn');
      btn.addEventListener('click', async () => {
        btn.disabled = true;
        try {
          const response = await fetch('/api/makehaiku', { method: 'POST' });
          if (!response.ok) {
            throw new Error(`Response status: ${response.status}`);
          }
          console.log(response);
        } catch (error) {
          console.error(error.message);
        } finally {
          btn.disabled = false;
        }
      });
    </script>
  </body>
</html>
